<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#1a1a1a">
    <title>TayDot Player</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }

        body {
            background: #1a1a1a;
            color: #fff;
            overflow: hidden;
        }

        .container {
            max-width: 100vw;
            height: 100vh;
        }

        .header {
            text-align: center;
            padding: 20px;
        }

        .header h1 {
            font-size: 2em;
            color: #ff6b6b;
        }

        .playlist-container {
            padding: 20px;
            overflow-y: auto;
            height: calc(100vh - 80px);
        }

        .player-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: #1a1a1a;
            display: none;
            flex-direction: column;
            z-index: 1000;
        }

        .player-container.active {
            display: flex;
        }

        .back-btn {
            position: absolute;
            top: 25px;
            left: 25px;
            font-size: 36px;
            color: #fff;
            cursor: pointer;
            z-index: 1001;
            background: rgba(0,0,0,0.7);
            padding: 15px;
            border-radius: 50%;
        }

        .album-art {
            width: 80vw;
            height: 80vw;
            max-width: 400px;
            max-height: 400px;
            margin: 10vh auto 0;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 0 30px rgba(0,0,0,0.5);
        }

        .album-art img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .song-info {
            text-align: center;
            margin: 20px 0;
        }

        .song-title {
            font-size: 24px;
            margin-bottom: 5px;
            color: #ff6b6b;
        }

        .artist {
            color: #888;
            font-size: 16px;
        }

        .progress-container {
            width: 90%;
            margin: 0 auto;
            height: 5px;
            background: #333;
            border-radius: 5px;
            position: absolute;
            bottom: 150px;
            left: 5%;
        }

        .progress {
            height: 100%;
            background: #ff6b6b;
            transition: width 0.1s linear;
        }

        .time-display {
            width: 90%;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            position: absolute;
            bottom: 170px;
            left: 5%;
        }

        .controls {
            position: absolute;
            bottom: 30px;
            width: 100%;
            display: flex;
            justify-content: space-between;
            padding: 0 20px;
        }

        .control-btn {
            background: none;
            border: none;
            color: #fff;
            font-size: 24px;
            padding: 15px;
            cursor: pointer;
        }

        .volume-container {
            position: absolute;
            bottom: 100px;
            width: 90%;
            left: 5%;
            touch-action: none;
        }

        .volume-slider {
            width: 100%;
            height: 30px;
            -webkit-appearance: none;
            background: transparent;
        }

        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 30px;
            height: 30px;
            background: #ff6b6b;
            border-radius: 50%;
        }

        .playlist-item {
            display: flex;
            align-items: center;
            padding: 10px;
            margin-bottom: 10px;
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
        }

        .playlist-item img {
            width: 40px;
            height: 40px;
            border-radius: 5px;
            margin-right: 15px;
        }

        .upload-btn {
            background: #ff6b6b;
            color: white;
            padding: 12px 25px;
            border-radius: 25px;
            border: none;
            cursor: pointer;
            display: block;
            margin: 20px auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>TayDot Player</h1>
        </div>

        <div class="playlist-container">
            <button class="upload-btn" onclick="document.getElementById('file-input').click()">
                <i class="fas fa-plus"></i> Add Songs
            </button>
            <input type="file" id="file-input" multiple accept="audio/*" hidden>
            <div id="playlist-items"></div>
        </div>

        <div class="player-container">
            <button class="back-btn" id="back-btn">
                <i class="fas fa-arrow-left"></i>
            </button>
            <div class="album-art">
                <img src="https://picsum.photos/300" alt="Album Art" id="cover">
            </div>
            <div class="song-info">
                <div class="song-title" id="title">Song Title</div>
                <div class="artist" id="artist">Artist Name</div>
            </div>
            <div class="time-display">
                <span id="current-time">0:00</span>
                <span id="duration">0:00</span>
            </div>
            <div class="progress-container" id="progress-container">
                <div class="progress" id="progress"></div>
            </div>
            <div class="volume-container">
                <input type="range" class="volume-slider" id="volume" min="0" max="1" step="0.1" value="1">
            </div>
            <div class="controls">
                <button class="control-btn" id="shuffle"><i class="fas fa-random"></i></button>
                <button class="control-btn" id="prev"><i class="fas fa-step-backward"></i></button>
                <button class="control-btn" id="play"><i class="fas fa-play"></i></button>
                <button class="control-btn" id="next"><i class="fas fa-step-forward"></i></button>
                <button class="control-btn" id="repeat"><i class="fas fa-redo"></i></button>
            </div>
        </div>
    </div>

    <script>
        const initialSongs = [
            {
                title: "Summer Vibes",
                artist: "Chill Artist",
                cover: "https://picsum.photos/300",
                src: "path-to-your-audio-file-1.mp3"
            }
        ];

        let songs = [...initialSongs];
        let currentSongIndex = 0;
        let isPlaying = false;
        let isShuffle = false;
        let isRepeat = false;
        let touchStartX = 0;
        let isVolumeInteraction = false;
        const SWIPE_THRESHOLD = 50;

        const audio = new Audio();
        const elements = {
            play: document.getElementById('play'),
            volume: document.getElementById('volume'),
            progress: document.getElementById('progress'),
            currentTime: document.getElementById('current-time'),
            duration: document.getElementById('duration'),
            title: document.getElementById('title'),
            artist: document.getElementById('artist'),
            cover: document.getElementById('cover'),
            playlistItems: document.getElementById('playlist-items'),
            fileInput: document.getElementById('file-input'),
            backBtn: document.getElementById('back-btn'),
            playerContainer: document.querySelector('.player-container')
        };

        // Touch Handling
        document.addEventListener('touchstart', e => {
            if (e.target === elements.volume || e.target.closest('.volume-container')) {
                isVolumeInteraction = true;
                touchStartX = e.touches[0].clientX;
                return;
            }
            touchStartX = e.touches[0].clientX;
        });

        document.addEventListener('touchend', e => {
            if (isVolumeInteraction) {
                isVolumeInteraction = false;
                return;
            }
            
            const touchEndX = e.changedTouches[0].clientX;
            const deltaX = touchEndX - touchStartX;

            if (Math.abs(deltaX) > SWIPE_THRESHOLD) {
                deltaX > 0 ? changeSong(-1) : changeSong(1);
            }
        });

        // Volume Control
        elements.volume.addEventListener('touchmove', e => {
            if (!isVolumeInteraction) return;
            const touchX = e.touches[0].clientX;
            const rect = elements.volume.getBoundingClientRect();
            const percentage = (touchX - rect.left) / rect.width;
            const newVolume = Math.min(Math.max(percentage, 0), 1);
            audio.volume = newVolume;
            elements.volume.value = newVolume;
        });

        // Player Functions
        function initPlaylist() {
            elements.playlistItems.innerHTML = songs.map((song, index) => `
                <div class="playlist-item" data-index="${index}" onclick="selectSong(${index})">
                    <img src="${song.cover || 'https://picsum.photos/50'}">
                    <div>
                        <div>${song.title}</div>
                        <div class="artist">${song.artist}</div>
                    </div>
                </div>
            `).join('');
        }

        function selectSong(index) {
            currentSongIndex = index;
            loadSong(index);
            elements.playerContainer.classList.add('active');
            audio.play();
        }

        function loadSong(index) {
            const song = songs[index];
            elements.title.textContent = song.title;
            elements.artist.textContent = song.artist;
            elements.cover.src = song.cover;
            audio.src = song.src;
        }

        function togglePlay() {
            isPlaying ? audio.pause() : audio.play();
        }

        function updateProgress(e) {
            const { duration, currentTime } = e.srcElement;
            const progressPercent = (currentTime / duration) * 100;
            elements.progress.style.width = `${progressPercent}%`;
            elements.currentTime.textContent = formatTime(currentTime);
            elements.duration.textContent = formatTime(duration);
        }

        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const remainingSeconds = Math.floor(seconds % 60);
            return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;
        }

        function changeSong(direction) {
            currentSongIndex = (currentSongIndex + direction + songs.length) % songs.length;
            loadSong(currentSongIndex);
            if (isPlaying) audio.play();
        }

        // Event Listeners
        elements.play.addEventListener('click', togglePlay);
        elements.prev.addEventListener('click', () => changeSong(-1));
        elements.next.addEventListener('click', () => changeSong(1));
        elements.backBtn.addEventListener('click', () => elements.playerContainer.classList.remove('active'));
        elements.fileInput.addEventListener('change', handleFileUpload);

        audio.addEventListener('timeupdate', updateProgress);
        audio.addEventListener('ended', () => isRepeat ? audio.play() : changeSong(1));
        audio.addEventListener('play', () => {
            isPlaying = true;
            elements.play.innerHTML = '<i class="fas fa-pause"></i>';
        });
        audio.addEventListener('pause', () => {
            isPlaying = false;
            elements.play.innerHTML = '<i class="fas fa-play"></i>';
        });

        // Initialization
        initPlaylist();
        loadSong(0);
        audio.volume = elements.volume.value;
    </script>
</body>
</html>
